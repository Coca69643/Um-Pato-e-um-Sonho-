<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pato Survival: Python World Gen</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.10.7/brython.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.10.7/brython_stdlib.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #050a05; font-family: sans-serif; }
        canvas { display: block; touch-action: none; }
        #loading { position: absolute; width: 100%; height: 100%; background: #000; color: #fff; display: flex; align-items: center; justify-content: center; z-index: 1000; }
    </style>
</head>
<body onload="brython()">
    <div id="loading">Gerando Mundo com Python...</div>
    
    <canvas id="gameCanvas" style="display:none;"></canvas>

    <script type="text/python">
        from browser import window, document
        import random

        def gerar_mundo(tamanho, qtd_recursos):
            mapa = []
            for _ in range(qtd_recursos):
                # Python decide a raridade e posição
                tipo = "tree" if random.random() > 0.3 else "stone"
                x = random.randint(0, tamanho)
                y = random.randint(0, tamanho)
                mapa.append({"x": x, "y": y, "type": tipo, "hp": 10})
            return mapa

        # Exporta para o JavaScript
        window.gerarMundoPython = gerar_mundo
        document["loading"].style.display = "none"
        document["gameCanvas"].style.display = "block"
        window.initGame() 
    </script>

    <script src="core.js"></script>
</body>
</html>

